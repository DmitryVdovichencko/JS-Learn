# Рекурсия в JS :arrows_counterclockwise:

В функциях могут вызываться другие функции. Если функция вызывает саму себя - __это рекурсия__ :arrows_counterclockwise: :cyclone: :dizzy_face:

Разберемся как работает рекурсия на примерах: :information_desk_person:

## Пример 1. Возводим число в степень. :chart_with_upwards_trend:

Для этого:

- [x] Создаем функцию `pow(x, n)` x - число, возводимое в степень, n - показатель степени.
- [x] Разбираемся как работает возведение в степень: это многократное умножение числа на самого себя, значит есть работа для рекурсии :dizzy_face:
- [x] Назначаем значение при котором рекурсия закончится: в нашем случае `n==1` - __базис рекурсии__. Количество вложенных вызовов т.е. __глубина рекурсии__ в нашем случае равно `n`.

```javascript

function pow(x, n) {
  if (n != 1) { // пока n != 1, сводить вычисление pow(x,n) к pow(x,n-1)
    return x * pow(x, n - 1);
  } else {
    return x;
  }
}

console.log( pow(2, 3) ); // 8

```

### Что здесь происходит? :dizzy_face:

![What's going on?](https://raw.githubusercontent.com/DmitryVdovichencko/JS-Learn/master/img/macEvoy.jpg)

У каждого вызова функции есть __контекст выполнения__. Там содержится инфа о локальных переменных и месте выполнения.:point_down:
- [ ] __Контекст: `{x:2, n:3, строка 1}`.__

Начинаем выполнять функцию `pow(2,3)`. Проверка по `if(n != 1)` даст `true` (`n === 3`).
Значит в строке 3 будет вложенный вызов `pow(2,2)` с новыми параметрами.

- [ ] Контекст: `{x:2, n:3, строка 3}`.

  - [ ] __Контекст: `{x:2, n:2, строка 1}`.__
  
Выполняем еще один вложенный вызов `pow(2,1)`.
  
- [ ] Контекст: `{x:2, n:3, строка 3}`.

  - [ ] Контекст: `{x:2, n:2, строка 3}`.
  
    - [x] __Контекст: `{x:2, n:1, строка 1}`.__
 
На этом этапе вложенные вызовы заканчиваются и возвращается значение `2` (т.к. `n === 1`). Контекст удаляется из памяти и мы идем обратно по стеку вызовов.

- [ ] Контекст: `{x:2, n:3, строка 3}`.

  - [x] Контекст: `{x:2, n:2, строка 3}`.

По второму контексту возвращаем `4` и  возвращаемся к первому.

- [x] Контекст: `{x:2, n:3, строка 3}`.

После выполнения первоначального внешнего вызова вернется `8`.

